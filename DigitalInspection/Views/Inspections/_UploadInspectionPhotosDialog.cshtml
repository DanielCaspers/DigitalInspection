@model DigitalInspection.ViewModels.UploadInspectionPhotosViewModel

@{
	const string TEMPLATE_NAMESPACE = "uploadInspectionPhotosDialog";
	const string CANCEL = TEMPLATE_NAMESPACE + "_cancel";
	const string SUCCESS = TEMPLATE_NAMESPACE + "_success";
}

@if (Model.ChecklistItem != null)
{
	<div id="@TEMPLATE_NAMESPACE" class="modal fade">
		<div class="modal-dialog modal-lg">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
					<h4 class="modal-title">Upload photo - @Model.ChecklistItem.Name</h4>
				</div>
				@*@using (Ajax.BeginForm(
						"Photo",
						"Inspections",
						FormMethod.Post,
						new AjaxOptions
						{
							InsertionMode = InsertionMode.Replace,
							UpdateTargetId = "inspectionTableErrorContainer"
						},
						new {
							id = "uploadInspectionPhotosForm",
							autocomplete = "off",
							enctype = "multipart/form-data"
						})
					)
				{*@
					@using (Html.BeginForm(
							"Photo",
							"Inspections",
							FormMethod.Post,
							new
							{
								id = "uploadInspectionPhotosForm",
								autocomplete = "off",
								enctype = "multipart/form-data"
							})
						)
					{
					<div class="modal-body">
						<div class="container-flex center">
							<!-- Center the image using extra div wrapper + flex, while preventing flex from messing with aspect ratio -->
							<div>
								<img id="camera-viewfinder" class="img-responsive" style="max-height:55vh" src="#" />
							</div>
						</div>
					</div>

					<div class="container-flex center">
						<div class="form-group">
							<label for="fileInput" class="btn btn-primary">
								<i class="material-icons md-36">camera_alt</i>
							</label>
							@Html.TextBoxFor(m => m.Picture, new { type = "file", accept = "image/*", id="fileInput" })
						</div>
					</div>

					<div class="container-flex center text-warning">Max Size is 8 MB</div>

					<div class="modal-footer">
						<button id="@CANCEL" type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
						<button id="@SUCCESS" type="submit" class="btn btn-primary" data-dismiss="modal">Upload</button>
					</div>

					@Html.HiddenFor(m => m.WorkOrderId)
				}
			</div>
		</div>
	</div>
}

