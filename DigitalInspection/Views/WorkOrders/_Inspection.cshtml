@model DigitalInspection.ViewModels.WorkOrderInspectionViewModel
@using System.Web.Hosting

@{
	Layout = "~/Views/Shared/_Layout.cshtml";
	ViewBag.Title = "Digital Inspection";
}

@section TabContainer {
	@{ Html.RenderPartial("TabContainers/_WorkOrderDetailTabs", Model.TabViewModel);}
}

@section Toolbar{

	<div class="container-flex between ma-nav-info">
		<div>
			<a href="@Url.Action("Index", "WorkOrders")"
				class="btn btn-default back-button no-margin pull-left">
				<i class="material-icons">arrow_back</i>
				Order @Model.WorkOrder.Id.Substring(3)
			</a>

			@Html.Partial("_CustomerVehicleSummary", Model.WorkOrder)
		</div>
	</div>
}

<div class="container-fluid">
	<div class="container-flex around" style="flex-wrap: wrap">

		@foreach (var checklist in Model.Checklists)
		{
			<div class="panel panel-info ma-card" style="width: 320px;">
				<div class="panel-heading">
					<div class="panel-title">
						<h4>@checklist.Name</h4>
					</div>
				</div>

				<a href="@Url.Action("Index", "Inspections", new { workOrderId = Model.WorkOrder.Id, checklistId = checklist.Id })">
					<div class="img-darkener" style="min-height: 150px;">
						@if(checklist.Image != null)
						{
							if (HostingEnvironment.ApplicationVirtualPath == "/" || HostingEnvironment.ApplicationVirtualPath == "\\")
							{
								<img src="@Path.Combine("/Uploads/Checklists/", @checklist.Image.Title)"
										alt="Image could not be found" />
							}
							else
							{
								<img src="@(HostingEnvironment.ApplicationVirtualPath + "/Uploads/Checklists/" + @checklist.Image.Title)"
										alt="Image could not be found" />
							}

						}
					</div>
				</a>

				<!-- Consider using progress statistics down here -->
				@*<div class="panel-footer">
					X of Y completed
				</div>*@
			</div>
		}

	</div>
</div>
