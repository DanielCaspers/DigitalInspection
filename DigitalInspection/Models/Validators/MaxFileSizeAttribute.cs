using System.ComponentModel.DataAnnotations;
using System.Web;

public class MaxFileSizeAttribute : ValidationAttribute
{
	private readonly int _maxFileSize;
	public MaxFileSizeAttribute(int maxFileSize)
	{
		_maxFileSize = maxFileSize;
	}

	public override bool IsValid(object value)
	{
		var file = value as HttpPostedFileBase;
		if (file == null)
		{
			return false;
		}
		return file.ContentLength <= _maxFileSize;
	}

	public override string FormatErrorMessage(string name)
	{
		return base.FormatErrorMessage(_maxFileSize.ToString());
	}
}